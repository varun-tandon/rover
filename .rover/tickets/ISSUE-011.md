# ISSUE-011: bySeverity Record type lacks semantic clarity

**Severity**: Low
**Category**: Generic Container
**Detected by**: obviousness-auditor
**File**: `src/storage/issues.ts:161-183`

## Description

In getIssueStats, the returned bySeverity is typed as Record<string, number> which is generic and loses the semantic meaning that keys should be severity levels ('low' | 'medium' | 'high' | 'critical'). This makes it easy to misuse the data structure and harder to understand what valid keys are.

## Problematic Code

```typescript
return {
  totalIssues: store.issues.length,
  byCategory: Record<string, number>,
  bySeverity: Record<string, number>,
  lastScanAt: store.issues.length > 0 ? store.lastScanAt : null
};
```

## Recommendation

Define a specific type like 'type SeverityCount = Partial<Record<IssueSeverity, number>>' and use it for bySeverity. This makes the valid keys explicit and provides better type safety. Same applies to byCategory - consider creating a CategoryCount type.

## Voting Summary

**Result**: 3/3 votes to approve

- **Voter 1**: Approved - "The issue is genuine and valid. The getIssueStats function returns Record<string, number> for both bySeverity and byCategory, when IssueSeverity is already defined as a union type ('low' | 'medium' | 'high' | 'critical') in the types file. Using Partial<Record<IssueSeverity, number>> would provide better type safety, make the API clearer, and prevent misuse. The severity level is appropriately 'low' since this is about improving type safety rather than a runtime bug. The recommendation is sensible and would objectively improve code quality."
- **Voter 2**: Approved - "Genuine issue. The function returns Record<string, number> for both bySeverity and byCategory when IssueSeverity is already defined as 'low' | 'medium' | 'high' | 'critical'. Using Partial<Record<IssueSeverity, number>> would provide better type safety and make the valid keys explicit. The recommendation is practical and would improve code maintainability without significant overhead. Severity 'low' is appropriate as this is a type safety improvement rather than a bug."
- **Voter 3**: Approved - "Genuine issue. The code at lines 161-183 returns bySeverity and byCategory as Record<string, number>, but IssueSeverity is already defined as 'low' | 'medium' | 'high' | 'critical' in types/index.ts:24. Using Partial<Record<IssueSeverity, number>> would provide better type safety and make the valid keys explicit. The recommendation is sound and would improve code clarity without significant complexity."

---
*Generated by Rover on December 12, 2025*