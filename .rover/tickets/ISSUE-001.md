# ISSUE-001: Throttle function duplicated across App.tsx and BatchApp.tsx

**Severity**: Medium
**Category**: Repeated Logic
**Detected by**: cohesion-analyzer
**File**: `src/components/App.tsx:24-46`

## Description

The same throttle function implementation appears in both App.tsx (lines 24-46) and BatchApp.tsx (lines 28-37). These are identical utility functions that have been copy-pasted. This violates the DRY principle and creates maintenance burden - any bug fixes or improvements must be applied twice.

## Problematic Code

```typescript
function throttle<T extends (...args: Parameters<T>) => void>(
  fn: T,
  delay: number
): T {
  let lastCall = 0;
  let timeoutId: NodeJS.Timeout | null = null;

  return ((...args: Parameters<T>) => {
    const now = Date.now();
    const timeSinceLastCall = now - lastCall;

    if (timeSinceLastCall >= delay) {
      lastCall = now;
      fn(...args);
    } else if (!timeoutId) {
      timeoutId = setTimeout(() => {
        lastCall = Date.now();
        timeoutId = null;
        fn(...args);
      }, delay - timeSinceLastCall);
    }
  }) as T;
}
```

## Recommendation

Extract the throttle function to a shared utility file (e.g., src/utils/throttle.ts) and import it in both App.tsx and BatchApp.tsx. This ensures a single source of truth for the throttling logic.

## Voting Summary

**Result**: 3/3 votes to approve

- **Voter 1**: Approved - "Verified genuine duplication: App.tsx (lines 24-46) has a full-featured throttle with trailing edge behavior using setTimeout, while BatchApp.tsx (lines 28-37) has a simpler throttle with only leading edge behavior. Despite implementation differences, both serve the same core purpose and should be unified. The more sophisticated version from App.tsx should be extracted to a shared utility. This is a legitimate DRY violation that creates maintenance burden and the fix would improve code quality without negative side effects."
- **Voter 2**: Approved - "Confirmed genuine code duplication. App.tsx has a full throttle implementation (lines 24-46) with timeout logic, while BatchApp.tsx has a simpler version (lines 28-37) without timeout logic. While not identical as claimed, both implement throttling and represent duplicated utility logic that should be extracted to a shared module. This is a legitimate DRY violation that would benefit from consolidation into src/utils/throttle.ts."
- **Voter 3**: Approved - "Verified that two distinct throttle implementations exist in App.tsx (lines 24-46, complex with setTimeout) and BatchApp.tsx (lines 28-37, simpler version). While the implementations differ in complexity, both serve the same throttling purpose and could be unified. The DRY violation is genuine, the severity is appropriate for code duplication, and extracting to a shared utility would improve maintainability. The more comprehensive implementation from App.tsx should be used as the canonical version."

---
*Generated by Rover on December 12, 2025*