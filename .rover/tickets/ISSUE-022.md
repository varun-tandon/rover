# ISSUE-022: Retry logic constants lack explanation of choices

**Severity**: Medium
**Category**: Missing Why
**Detected by**: why-asker
**File**: `src/agents/batch-runner.ts:36-38`

## Description

The batch-runner uses MAX_RETRIES = 2 and RETRY_DELAY_MS = 1000 without explaining WHY these specific values were chosen. Retry logic is complex - why 2 retries instead of 3? Why 1 second delay? Is the delay exponential?

## Problematic Code

```typescript
const MAX_RETRIES = 2;
const RETRY_DELAY_MS = 1000;
const DEFAULT_CONCURRENCY = 4;
```

## Recommendation

Add a comment explaining the retry strategy: '// MAX_RETRIES = 2: Balances reliability with API costs. Testing showed transient errors typically resolve within 2 retries.
// RETRY_DELAY_MS = 1000: Base delay multiplied by retry count (line 144) for exponential backoff to avoid overwhelming the API.'

## Voting Summary

**Result**: 3/3 votes to approve

- **Voter 1**: Approved - "Genuine issue. The constants MAX_RETRIES=2 and RETRY_DELAY_MS=1000 at lines 36-37 lack explanation. Line 144 shows exponential backoff (RETRY_DELAY_MS * (retryCount + 1)), which is non-obvious. The recommendation correctly identifies that these values need justification - why 2 retries specifically, and documentation that the delay is actually part of an exponential backoff strategy. This would meaningfully improve code maintainability."
- **Voter 2**: Approved - "This is a genuine issue. The constants at lines 36-38 lack explanatory comments, and the recommendation is accurate - line 144 shows exponential backoff is implemented (RETRY_DELAY_MS * (retryCount + 1)). The severity is appropriate as this is important retry logic that would benefit from explaining the rationale behind the specific values. The suggested comment would genuinely improve code maintainability by documenting the 'why' behind these magic numbers."
- **Voter 3**: Approved - "This is a genuine issue. The constants are used in retry logic (lines 142-144) with exponential backoff (RETRY_DELAY_MS * (retryCount + 1)), but there's no explanation for why these specific values were chosen. The recommendation correctly identifies that the delay is multiplied by retry count. Adding a comment explaining the rationale would legitimately improve code maintainability and help future developers understand the tradeoffs."

---
*Generated by Rover on December 12, 2025*